{
  "raw": {
    "preamble": {
      "bip": "331",
      "title": "Ancestor Package Relay",
      "author": [
        "Gloria Zhao <gloriajzhao@gmail.com>"
      ],
      "comments_uri": "https://github.com/bitcoin/bips/wiki/Comments:BIP-0331",
      "status": "Draft",
      "type": "Standards Track",
      "created": "2022-08-08",
      "license": [
        "BSD-3-Clause"
      ],
      "layer": "Peer Services",
      "discussions_to": null,
      "comments_summary": null,
      "license_code": null,
      "post_history": "2022-05-17 https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-May/020493.html [bitcoin-dev] post",
      "requires": null,
      "replaces": null,
      "superseded_by": null,
      "compliance_score": 64.71
    }
  },
  "metadata": {
    "last_commit": null,
    "total_commits": 0,
    "metadata_last_updated": "2025-04-21T15:53:02",
    "git_history": [],
    "contributors": 0
  },
  "insights": {
    "word_list": {
      "transactions": 81,
      "package": 77,
      "transaction": 60,
      "message": 46,
      "relay": 44,
      "may": 38,
      "not": 37,
      "ref": 32,
      "should": 29,
      "if": 28,
      "mempool": 25,
      "type": 24,
      "s": 24,
      "https": 22,
      "bitcoin": 22,
      "feerate": 22,
      "node": 22,
      "sender": 22,
      "nodes": 21,
      "information": 21,
      "packages": 20,
      "peers": 20,
      "peer": 19,
      "ancestor": 19,
      "used": 19,
      "their": 19,
      "sendpackages": 19,
      "getpkgtxns": 18,
      "which": 17,
      "sent": 17,
      "com": 16,
      "protocol": 16,
      "only": 16,
      "list": 16,
      "ancpkginfo": 16,
      "github": 15,
      "request": 15,
      "based": 15,
      "code": 15,
      "use": 14,
      "must": 14,
      "one": 14,
      "wtxids": 14,
      "inv": 14,
      "using": 13,
      "fee": 13,
      "can": 13,
      "both": 13,
      "receiver": 13,
      "messages": 12,
      "more": 12,
      "data": 12,
      "upon": 12,
      "unconfirmed": 11,
      "policy": 11,
      "they": 11,
      "low": 11,
      "support": 11,
      "ancestors": 10,
      "order": 10,
      "two": 10,
      "pinning": 10,
      "no": 10,
      "new": 10,
      "txid": 10,
      "wtxid": 10,
      "requested": 10,
      "received": 10,
      "round": 10,
      "versions": 10,
      "bip": 9,
      "parent": 9,
      "but": 9,
      "without": 9,
      "orphan": 9,
      "bandwidth": 9,
      "pkgtxns": 9,
      "version": 9,
      "field": 9,
      "hash": 9,
      "disconnected": 9,
      "0331": 8,
      "dev": 8,
      "high": 8,
      "them": 8,
      "child": 8,
      "all": 8,
      "would": 8,
      "attacks": 8,
      "e": 8,
      "download": 8,
      "getdata": 8,
      "2022": 7,
      "lists": 7,
      "linuxfoundation": 7,
      "org": 7,
      "pipermail": 7,
      "html": 7,
      "include": 7,
      "other": 7,
      "network": 7,
      "each": 7,
      "why": 7,
      "send": 7,
      "file": 7,
      "png": 7,
      "msg_ancpkginfo": 7,
      "initiated": 7,
      "notfound": 7,
      "receipt": 7,
      "block": 6,
      "descendants": 6,
      "cannot": 6,
      "does": 6,
      "rejected": 6,
      "already": 6,
      "also": 6,
      "time": 6,
      "these": 6,
      "negotiated": 6,
      "have": 6,
      "g": 6,
      "accept": 6,
      "acceptance": 6,
      "than": 6,
      "parents": 6,
      "between": 6,
      "what": 6,
      "avoid": 6,
      "downloading": 6,
      "during": 6,
      "msg_pkgtxns": 6,
      "1": 6,
      "below": 6,
      "after": 6,
      "combined": 6,
      "response": 6,
      "set": 6,
      "instead": 5,
      "pull": 5,
      "help": 5,
      "while": 5,
      "determine": 5,
      "when": 5,
      "do": 5,
      "protocols": 5,
      "blob": 5,
      "master": 5,
      "md": 5,
      "t": 5,
      "some": 5,
      "proposal": 5,
      "validated": 5,
      "handling": 5,
      "any": 5,
      "whether": 5,
      "handshake": 5,
      "types": 5,
      "bit": 5,
      "announce": 5,
      "txns_length": 5,
      "chainstate": 5,
      "3": 4,
      "propagate": 4,
      "incentive": 4,
      "compatible": 4,
      "fees": 4,
      "non": 4,
      "users": 4,
      "individually": 4,
      "meet": 4,
      "lightning": 4,
      "always": 4,
      "work": 4,
      "require": 4,
      "another": 4,
      "orphans": 4,
      "need": 4,
      "just": 4,
      "multiple": 4,
      "requires": 4,
      "tx0": 4,
      "tx1": 4,
      "children": 4,
      "we": 4,
      "however": 4,
      "see": 4,
      "logic": 4,
      "future": 4,
      "contain": 4,
      "possible": 4,
      "pkg_relay_pkgtxns": 4,
      "name": 4,
      "size": 4,
      "purpose": 4,
      "structure": 4,
      "defined": 4,
      "above": 4,
      "pchcommand": 4,
      "specified": 4,
      "number": 4,
      "txns": 4,
      "last": 4,
      "topological": 4,
      "same": 4,
      "pre": 3,
      "since": 3,
      "policies": 3,
      "create": 3,
      "result": 3,
      "conflicting": 3,
      "rbf": 3,
      "inputs": 3,
      "security": 3,
      "contracting": 3,
      "revault": 3,
      "gist": 3,
      "greg": 3,
      "sanders": 3,
      "too": 3,
      "available": 3,
      "allow": 3,
      "likely": 3,
      "p2p": 3,
      "validation": 3,
      "way": 3,
      "output": 3,
      "very": 3,
      "missing": 3,
      "sorted": 3,
      "before": 3,
      "learn": 3,
      "decide": 3,
      "br": 3,
      "together": 3,
      "make": 3,
      "example": 3,
      "accepted": 3,
      "pkg_relay_anc": 3,
      "provided": 3,
      "validate": 3,
      "there": 3,
      "usage": 3,
      "design": 3,
      "added": 3,
      "indicating": 3,
      "verack": 3,
      "corresponding": 3,
      "compactsize": 3,
      "bytes": 3,
      "disconnect": 3,
      "info": 3,
      "contains": 3,
      "malformed": 3,
      "indicates": 3,
      "most": 3,
      "waste": 3,
      "named": 3,
      "diagram": 3,
      "comments": 2,
      "08": 2,
      "post": 2,
      "020493": 2,
      "enabling": 2,
      "given": 2,
      "core": 2,
      "compatibility": 2,
      "add": 2,
      "blocks": 2,
      "miner": 2,
      "market": 2,
      "space": 2,
      "mining": 2,
      "many": 2,
      "including": 2,
      "faster": 2,
      "additionally": 2,
      "take": 2,
      "bump": 2,
      "priority": 2,
      "considering": 2,
      "limitation": 2,
      "ability": 2,
      "into": 2,
      "minimum": 2,
      "descendant": 2,
      "spending": 2,
      "issues": 2,
      "sensitive": 2,
      "examples": 2,
      "l2": 2,
      "htlc": 2,
      "timeout": 2,
      "refund": 2,
      "instagibbs": 2,
      "60264606e181451e977e439a49f69fe1": 2,
      "eltoo": 2,
      "peerswap": 2,
      "docs": 2,
      "claim": 2,
      "prevent": 2,
      "been": 2,
      "censorship": 2,
      "being": 2,
      "relayed": 2,
      "stop": 2,
      "2020": 2,
      "counterparties": 2,
      "june": 2,
      "antoine": 2,
      "riard": 2,
      "well": 2,
      "ahead": 2,
      "broadcast": 2,
      "money": 2,
      "issue": 2,
      "solution": 2,
      "mempools": 2,
      "enable": 2,
      "actually": 2,
      "requirements": 2,
      "wide": 2,
      "theoretically": 2,
      "safe": 2,
      "could": 2,
      "practice": 2,
      "best": 2,
      "denial": 2,
      "service": 2,
      "such": 2,
      "adding": 2,
      "efficient": 2,
      "handle": 2,
      "problematic": 2,
      "witness": 2,
      "downloaded": 2,
      "ideally": 2,
      "shouldn": 2,
      "case": 2,
      "spend": 2,
      "receiving": 2,
      "unaware": 2,
      "up": 2,
      "storing": 2,
      "requesting": 2,
      "specify": 2,
      "end": 2,
      "allocate": 2,
      "unvalidated": 2,
      "where": 2,
      "spends": 2,
      "recursively": 2,
      "etc": 2,
      "necessarily": 2,
      "directed": 2,
      "topologically": 2,
      "rounds": 2,
      "alternative": 2,
      "considered": 2,
      "resources": 2,
      "like": 2,
      "minimize": 2,
      "storage": 2,
      "duplicate": 2,
      "600px": 2,
      "batched": 2,
      "because": 2,
      "1000px": 2,
      "bitfield": 2,
      "referenced": 2,
      "arbitrary": 2,
      "attack": 2,
      "vectors": 2,
      "cases": 2,
      "different": 2,
      "relationships": 2,
      "subset": 2,
      "indicate": 2,
      "0": 2,
      "paying": 2,
      "dependent": 2,
      "i": 2,
      "bip133": 2,
      "filter": 2,
      "handled": 2,
      "so": 2,
      "required": 2,
      "reject": 2,
      "previously": 2,
      "found": 2,
      "proactively": 2,
      "save": 2,
      "wasted": 2,
      "increase": 2,
      "then": 2,
      "id": 2,
      "provide": 2,
      "equal": 2,
      "bits": 2,
      "frelay": 2,
      "false": 2,
      "negotiation": 2,
      "first": 2,
      "discussion": 2,
      "32": 2,
      "sort": 2,
      "enforce": 2,
      "knowing": 2,
      "much": 2,
      "requests": 2,
      "change": 2,
      "full": 2,
      "unsolicited": 2,
      "pertaining": 2,
      "wants": 2,
      "containing": 2,
      "respond": 2,
      "item": 2,
      "never": 2,
      "either": 2,
      "100": 2,
      "choose": 2,
      "prior": 2,
      "clients": 2,
      "implementing": 2,
      "erlay": 2,
      "reconciliation": 2,
      "700px": 2,
      "pkginfo": 2,
      "implementation": 2,
      "thank": 2,
      "suhas": 2,
      "daftuar": 2,
      "john": 2,
      "newbery": 2,
      "others": 2,
      "input": 2,
      "references": 2,
      "331": 1,
      "layer": 1,
      "services": 1,
      "title": 1,
      "author": 1,
      "gloria": 1,
      "zhao": 1,
      "gloriajzhao": 1,
      "gmail": 1,
      "uri": 1,
      "bips": 1,
      "wiki": 1,
      "status": 1,
      "draft": 1,
      "standards": 1,
      "track": 1,
      "created": 1,
      "license": 1,
      "bsd": 1,
      "clause": 1,
      "history": 1,
      "05": 1,
      "17": 1,
      "abstract": 1,
      "batches": 1,
      "motivation": 1,
      "v0": 1,
      "13": 1,
      "individual": 1,
      "evaluate": 1,
      "7594": 1,
      "tracking": 1,
      "selecting": 1,
      "inclusion": 1,
      "7600": 1,
      "select": 1,
      "fair": 1,
      "miners": 1,
      "maximize": 1,
      "earn": 1,
      "higher": 1,
      "rewards": 1,
      "participating": 1,
      "reap": 1,
      "benefits": 1,
      "employing": 1,
      "similar": 1,
      "contents": 1,
      "compact": 1,
      "accurate": 1,
      "estimation": 1,
      "advantage": 1,
      "attaching": 1,
      "pays": 1,
      "cpfp": 1,
      "submission": 1,
      "creates": 1,
      "account": 1,
      "until": 1,
      "similarly": 1,
      "keep": 1,
      "replace": 1,
      "user": 1,
      "replacement": 1,
      "directly": 1,
      "simply": 1,
      "evicted": 1,
      "included": 1,
      "attach": 1,
      "pay": 1,
      "replacing": 1,
      "exist": 1,
      "harms": 1,
      "further": 1,
      "presents": 1,
      "complexity": 1,
      "rely": 1,
      "presigned": 1,
      "signed": 1,
      "bolts": 1,
      "03": 1,
      "success": 1,
      "htcl": 1,
      "ln": 1,
      "penalty": 1,
      "practical": 1,
      "cancel_tx": 1,
      "unvault": 1,
      "cancel": 1,
      "discreetlogcontracts": 1,
      "dlcspecs": 1,
      "discreet": 1,
      "log": 1,
      "contracts": 1,
      "updates": 1,
      "elementsproject": 1,
      "cheating": 1,
      "words": 1,
      "key": 1,
      "assumption": 1,
      "parties": 1,
      "confirm": 1,
      "timely": 1,
      "manner": 1,
      "increasing": 1,
      "attention": 1,
      "brought": 1,
      "attacker": 1,
      "uses": 1,
      "restrictions": 1,
      "getting": 1,
      "mined": 1,
      "concerns": 1,
      "020458": 1,
      "bringing": 1,
      "nuke": 1,
      "knife": 1,
      "fight": 1,
      "introspection": 1,
      "april": 1,
      "002639": 1,
      "matt": 1,
      "corallo": 1,
      "competing": 1,
      "interest": 1,
      "002758": 1,
      "good": 1,
      "bad": 1,
      "ugly": 1,
      "bast": 1,
      "bastien": 1,
      "teinturier": 1,
      "certain": 1,
      "confirmation": 1,
      "target": 1,
      "effective": 1,
      "feerates": 1,
      "forecast": 1,
      "bumping": 1,
      "options": 1,
      "attackers": 1,
      "steal": 1,
      "overestimating": 1,
      "sidestep": 1,
      "traffic": 1,
      "predictable": 1,
      "guaranteed": 1,
      "wastes": 1,
      "defenses": 1,
      "bird": 1,
      "eye": 1,
      "view": 1,
      "unreasonable": 1,
      "requirement": 1,
      "part": 1,
      "consider": 1,
      "unit": 1,
      "separately": 1,
      "aware": 1,
      "economically": 1,
      "rational": 1,
      "doesn": 1,
      "adoption": 1,
      "purely": 1,
      "adjust": 1,
      "therefore": 1,
      "developing": 1,
      "sufficient": 1,
      "solve": 1,
      "opportunistically": 1,
      "trying": 1,
      "combinations": 1,
      "inefficient": 1,
      "open": 1,
      "worst": 1,
      "suggests": 1,
      "share": 1,
      "related": 1,
      "resulting": 1,
      "reliable": 1,
      "better": 1,
      "malleated": 1,
      "changing": 1,
      "deduplicate": 1,
      "bip339": 1,
      "ever": 1,
      "single": 1,
      "remains": 1,
      "common": 1,
      "completed": 1,
      "initial": 1,
      "date": 1,
      "responds": 1,
      "seen": 1,
      "cache": 1,
      "prevouts": 1,
      "method": 1,
      "reasons": 1,
      "memory": 1,
      "relies": 1,
      "makes": 1,
      "resolution": 1,
      "longer": 1,
      "definitions": 1,
      "representable": 1,
      "connected": 1,
      "acyclic": 1,
      "graph": 1,
      "edge": 1,
      "exists": 1,
      "limited": 1,
      "consists": 1,
      "appears": 1,
      "somewhere": 1,
      "specification": 1,
      "includes": 1,
      "parts": 1,
      "want": 1,
      "separate": 1,
      "necessary": 1,
      "several": 1,
      "designs": 1,
      "measure": 1,
      "solutions": 1,
      "communicate": 1,
      "trustworthy": 1,
      "once": 1,
      "eventually": 1,
      "allocated": 1,
      "yet": 1,
      "refer": 1,
      "entire": 1,
      "skipping": 1,
      "honest": 1,
      "redownload": 1,
      "following": 1,
      "no_package_info": 1,
      "having": 1,
      "gives": 1,
      "enough": 1,
      "rather": 1,
      "option": 1,
      "potential": 1,
      "fallback": 1,
      "fails": 1,
      "reason": 1,
      "default": 1,
      "package_info_only": 1,
      "within": 1,
      "interpreted": 1,
      "attempting": 1,
      "complex": 1,
      "limitations": 1,
      "leveraged": 1,
      "censor": 1,
      "aka": 1,
      "extensible": 1,
      "desired": 1,
      "describe": 1,
      "numbering": 1,
      "system": 1,
      "existing": 1,
      "version_negotiation": 1,
      "400px": 1,
      "flow": 1,
      "satisfies": 1,
      "delineating": 1,
      "done": 1,
      "valid": 1,
      "batch": 1,
      "contrast": 1,
      "legacy": 1,
      "txids": 1,
      "trips": 1,
      "generation": 1,
      "orphan_handling_flow": 1,
      "bumped": 1,
      "filters": 1,
      "naturally": 1,
      "works": 1,
      "mean": 1,
      "immediately": 1,
      "later": 1,
      "re": 1,
      "learning": 1,
      "package_cpfp_flow": 1,
      "trip": 1,
      "notifying": 1,
      "probably": 1,
      "group": 1,
      "proactive": 1,
      "communication": 1,
      "chance": 1,
      "knows": 1,
      "shortened": 1,
      "latency": 1,
      "less": 1,
      "significant": 1,
      "determines": 1,
      "net": 1,
      "decrease": 1,
      "overall": 1,
      "difficult": 1,
      "anything": 1,
      "idea": 1,
      "looks": 1,
      "historical": 1,
      "primary": 1,
      "goals": 1,
      "currently": 1,
      "deploying": 1,
      "observe": 1,
      "introduce": 1,
      "informed": 1,
      "collected": 1,
      "serves": 1,
      "unique": 1,
      "helps": 1,
      "meaningful": 1,
      "short": 1,
      "sha256": 1,
      "concatenated": 1,
      "lexicographical": 1,
      "four": 1,
      "uint64_t": 1,
      "4": 1,
      "64": 1,
      "denoting": 1,
      "supported": 1,
      "sending": 1,
      "successful": 1,
      "connection": 1,
      "did": 1,
      "wtxidrelay": 1,
      "matching": 1,
      "unknown": 1,
      "ignored": 1,
      "ok": 1,
      "yes": 1,
      "allowed": 1,
      "reduce": 1,
      "steps": 1,
      "means": 1,
      "features": 1,
      "checking": 1,
      "apply": 1,
      "020510": 1,
      "constitute": 1,
      "convenience": 1,
      "achieved": 1,
      "sorting": 1,
      "apart": 1,
      "corresponds": 1,
      "enforced": 1,
      "ordering": 1,
      "punish": 1,
      "who": 1,
      "provides": 1,
      "worth": 1,
      "simple": 1,
      "typically": 1,
      "insufficient": 1,
      "know": 1,
      "dependency": 1,
      "respective": 1,
      "sizes": 1,
      "punished": 1,
      "incorrect": 1,
      "unrelated": 1,
      "providing": 1,
      "correct": 1,
      "views": 1,
      "reorg": 1,
      "confirmed": 1,
      "impossible": 1,
      "accurately": 1,
      "originally": 1,
      "proposed": 1,
      "unwarranted": 1,
      "disconnections": 1,
      "sense": 1,
      "delay": 1,
      "due": 1,
      "mismatched": 1,
      "chainstates": 1,
      "again": 1,
      "differences": 1,
      "level": 1,
      "spent": 1,
      "effort": 1,
      "020558": 1,
      "establishing": 1,
      "tx": 1,
      "recipient": 1,
      "0x7": 1,
      "pertains": 1,
      "receive": 1,
      "none": 1,
      "intended": 1,
      "correspond": 1,
      "nothing": 1,
      "else": 1,
      "unavailable": 1,
      "ignore": 1,
      "calculating": 1,
      "variable": 1,
      "receives": 1,
      "0x6": 1,
      "unable": 1,
      "older": 1,
      "remain": 1,
      "fully": 1,
      "interoperable": 1,
      "attempt": 1,
      "agreed": 1,
      "cause": 1,
      "supports": 1,
      "zero": 1,
      "mitigate": 1,
      "client": 1,
      "bip330": 1,
      "able": 1,
      "interference": 1,
      "those": 1,
      "resolved": 1,
      "package_erlay": 1,
      "extensibility": 1,
      "extended": 1,
      "continuing": 1,
      "define": 1,
      "how": 1,
      "signal": 1,
      "additional": 1,
      "pkg_relay_": 1,
      "dialogue": 1,
      "specifying": 1,
      "sender_init_future_version": 1,
      "sample": 1,
      "27742": 1,
      "prerequisite": 1,
      "safely": 1,
      "validates": 1,
      "accepting": 1,
      "significantly": 1,
      "dos": 1,
      "surface": 1,
      "processing": 1,
      "permit": 1,
      "exhaustion": 1,
      "sensible": 1,
      "assumed": 1,
      "cpfps": 1,
      "invalid": 1,
      "still": 1,
      "acknowledgements": 1,
      "anthony": 1,
      "towns": 1,
      "martin": 1,
      "zumsande": 1,
      "clark": 1,
      "sergi": 1,
      "delgado": 1,
      "fabian": 1,
      "jahr": 1,
      "st√©phan": 1,
      "vuylsteke": 1,
      "pieter": 1,
      "wuille": 1,
      "document": 1,
      "inspired": 1,
      "ideas": 1,
      "sdaftuar": 1,
      "8756699bfcad4d3806ba9f3396d4e66a": 1,
      "strawman": 1,
      "14895": 1,
      "questions": 1,
      "16401": 1,
      "19621": 1,
      "rfc": 1,
      "rationale": 1
    },
    "bip_references": [
      "BIP 133",
      "BIP 330",
      "BIP 339"
    ],
    "dependencies": []
  }
}